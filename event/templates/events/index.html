{%extends 'base.html'%}
{% load static %}


{%block 'content'%}

<div class="bg-image"></div>

<div class="container-fluid text-center background">

    <!-- Navigation -->
    
    <div class="d-flex align-items-center fixed-top col-lx-9 mx-auto mt-5 nav-bar-rotacric nav-t-5">
        <div class="flex-shrink-0 col-lg-1 logo-rotacric rounded-circle ms-5">
          <img class="img-fluid img-cric" src="{% static 'images/logos/4.png'%}" alt="...">
        </div>
        <div class="flex-grow-1 me-5 ms-3">
            <nav class="navbar navbar-expand-md mb-0 rounded-pill">
                <div class="container text-center">
                            <a class="navbar-brand" href="#"></a>
                            <button class="navbar-toggler border-0" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
                                <span class="navbar-toggler-icon"></span>
                            </button>
                        <div class="offcanvas offcanvas-end text-center" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
                            <div class="offcanvas-header">
                                <h5 class="offcanvas-title" id="offcanvasNavbarLabel">RotaCric</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                            </div>
                            <div class="offcanvas-body">
                                <ul class="navbar-nav d-flex justify-content-around text-center flex-grow-1 pe-3">
                                    <li class="nav-item">
                                        <a class="nav-link" aria-current="page" href="#">Home</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="#">Municipios</a>
                                    </li>
                                    <li class="nav-item dropdown">
                                      <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                        Eventos
                                      </a>
                                      <ul class="dropdown-menu text-center">
                                        <li><a class="dropdown-item" href="#">Evento 01</a></li>
                                        <li><a class="dropdown-item" href="#">Evento 02</a></li>
                                        <li><a class="dropdown-item" href="#">Evento 03</a></li>
                                        <li><a class="dropdown-item" href="#">Evento 04</a></li>
                                      </ul>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="#">Manual</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="#">Sobre</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                </div>
            </nav>
        </div>
    </div>

    <div class="row justify-content-center">

    <!-- Title and Descripiton -->

        <div class="container col-10">
            <h2 class="title-event"  data-aos="fade-up">{{ event.name }}</h2>
            <p class="description-event fs-5 mt-5"  data-aos="fade-up">
                {{ event.description }}
            </p>
            {% for e in event.routes_data.all %}
            <p>{{ e.departure_location }}</p>
            <p>{{ e.time }}</p>
            <p>{{ e }}</p>
          {% endfor %}
        </div>
    </div>

    <!-- Images with Modal -->

    <div class="container mt-5">
        <div class="row gx-2 gy-3 content-images">
            {% for image in event.images.all %}
            <div class="col-lg-4 col-md-3">
                <a href="#" class="img-animation" type="button" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
                    <img src=" {{ image.image.url }} "
                    class="rounded img-event" alt="..." data-aos="fade-up" data-bs-target="#staticBackdrop">
                </a> 

            </div>
            <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog modal-xl">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="staticBackdropLabel">Titulo da Foto</h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <img src=" {{ image.image.url }} "
                             class="rounded img-fluid" alt="...">
                        </div>
                    </div>
                </div>
            </div>
                {% endfor %}
        </div>
    </div>
</div>

        <!-- Mapa de Rotas do Evento -->

<div class="text-center">
    <h2 class="mb-5 fw-bold topic-color text-" style="margin-top: 10rem;" data-aos="fade-up">
        Mapa das Rotas
    </h2>
    <div id="map" class="mt-3" style="height: 25rem; width: 30rem;" data-aos="fade-up"> <!-- Mapa --> </div>
</div>

        <!-- Formulario -->

<div class="container-fluid text-center background">

    <div class="container mx-auto mb-5 col-10 align-items-center">
        <h2 class="title-event text-center"  data-aos="fade-up">Formulário para Inscrição ao Evento</h2>
        <form class="bg-light px-5 py-5 col mt-5" id="enrollment-form" method="POST" action="{% url 'events:enrollment' event_id=event.pk %}" data-aos="fade-up">
            {% csrf_token %}
            <div class="input-group mb-3">
                <!-- Name -->
                <span class="input-group-text"><i class="fa-solid fa-user"></i></span>                  
                <input type="text" id="full_name" name="full_name" class="form-control" placeholder="Nome Completo" aria-label="Username" aria-describedby="basic-addon1">
            </div>

            <div class="input-group mb-3">
                <!-- Email -->
                <span class="input-group-text"><i class="fa-solid fa-user"></i></span>                  
                <input type="text" id="email" name="email" class="form-control" placeholder="Email" aria-label="Email" aria-describedby="basic-addon1">
            </div>

            <div class="input-group mb-3">
                <!-- RG -->
                <span class="input-group-text"><i class="fa-solid fa-address-card"></i></span>                  
                <input type="text" id="rg" name="rg" class="form-control" placeholder="Registro Geral" aria-label="RG">
            </div>
            <div class="input-group mb-3">
                <!-- Date born -->
                <span class="input-group-text"><i class="fa-solid fa-calendar-days"></i></span>                  
                <input type="date" id="date_of_birth" name="date_of_birth" class="form-control" placeholder="Data de Nascimento" aria-label="Data de nascimento">            
            </div>
            <div class="input-group mb-3">
                <!-- Instagram -->
                <span class="input-group-text"><i class="fa-brands fa-instagram"></i></span>                  
                <input type="text" id="instagram" name="social_network" class="form-control" placeholder="@instagram" aria-label="Instagram">
            </div>
                <!-- Bond Choice -->
            <select class="form-select mb-3" aria-label="Default select example" placeholder="Categoria" name="bond_choice">
                <option disabled selected>Categoria</option>
                {% for bond in bond %}
                <option selected>{{ bond.name }}</option>
                {% endfor %}
            </select>
                <!-- Routes -->
                
            <select class="form-select mb-3" aria-label="Default select example" name="route_path">
                <option  disabled selected>Nome do Trajeto</option>
                {% for routePath in routePath %}
                <option selected>{{ routePath.name }}</option>
                {% endfor %}
            </select>
                <!-- How Knew? -->
            <select class="form-select mb-3" aria-label="Default select example" name="how_knew">
                <option disabled selected>Como soube?</option>
                {% for howKnew in howKnew %}
                <option selected>{{ howKnew.name }}</option>
                {% endfor %}
            </select>
            
            <button type="submit" class="btn btn-dark mt-5">Enviar</button>
              
        </form>
    </div>
</div>

<footer class="bg-secondary" style="height: 50rem;">

</footer>

<script>
    var navBar = document.querySelector(".nav-bar-rotacric");
    // var logoNavbar = document.querySelector(".logo-rotacric");

    window.addEventListener("scroll", function(){
        if(window.pageYOffset > 150){
            navBar.classList.add("nav-scroll-rotacric");
            navBar.classList.remove("mt-5", "col-lx-9", "nav-t-5");
            // logoNavbar.classList.remove("col-2", "col-lg-1");
            // logoNavbar.classList.add("col-3", "col-sm-1");
        }else{
            navBar.classList.remove("nav-scroll-rotacric");
            // logoNavbar.classList.remove("col-2", "col-sm-1");
            navBar.classList.add("mt-5", "col-lx-9", "nav-t-5");
            // logoNavbar.classList.add("col-3", "col-lg-1");

        }
    });

</script>

{%endblock%}